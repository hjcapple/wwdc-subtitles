1
00:00:01,516 --> 00:00:06,036
[音乐]


2
00:00:06,536 --> 00:00:08,846
>> 大家好 我是 Tim Hatcher 


3
00:00:08,846 --> 00:00:10,066
WebKit 团队的工程师


4
00:00:10,866 --> 00:00:11,886
我将要介绍的是


5
00:00:11,886 --> 00:00:13,876
网页内容支持深色模式


6
00:00:16,046 --> 00:00:18,036
macOS Mojave 引入深色模式时


7
00:00:18,036 --> 00:00:20,056
用户和开发者


8
00:00:20,056 --> 00:00:22,766
都自然而然地关注网页内容


9
00:00:23,806 --> 00:00:25,766
几十年来


10
00:00:25,766 --> 00:00:27,166
网页内容一直都是浅色的


11
00:00:27,166 --> 00:00:29,356
在和新的 支持深色模式的 App


12
00:00:29,356 --> 00:00:32,716
一起使用时 显得特别亮


13
00:00:34,416 --> 00:00:36,036
WebKit 团队一直都在努力


14
00:00:36,036 --> 00:00:37,306
为开发者提供一个


15
00:00:37,306 --> 00:00:39,416
规范的方法来设计


16
00:00:39,416 --> 00:00:41,486
支持深色模式的网页内容 


17
00:00:41,486 --> 00:00:43,026
我很开心地宣布


18
00:00:43,026 --> 00:00:45,786
它在 macOS Mojave 的 Safari 浏览器 12.1 上可用了


19
00:00:48,516 --> 00:00:50,876
通过 iOS 13 的全系统深色外观


20
00:00:50,876 --> 00:00:53,266
你可以看到 


21
00:00:53,266 --> 00:00:54,996
在 iOS Safari 浏览器中 


22
00:00:54,996 --> 00:00:57,106
网页内容同样可用深色样式


23
00:00:59,596 --> 00:01:01,116
在这个视频里


24
00:01:01,116 --> 00:01:03,486
我会用 Safari 浏览器做例子


25
00:01:03,486 --> 00:01:04,566
但是不仅 Safari 浏览器


26
00:01:04,566 --> 00:01:05,706
支持深色模式


27
00:01:06,206 --> 00:01:08,936
邮件和 App 在网页视图里


28
00:01:08,936 --> 00:01:10,806
展示网页内容时


29
00:01:10,806 --> 00:01:11,636
也支持深色模式


30
00:01:13,726 --> 00:01:15,056
在这个视频里


31
00:01:15,056 --> 00:01:16,006
我想介绍三个方面


32
00:01:16,606 --> 00:01:18,826
一 对网页深色模式的


33
00:01:18,826 --> 00:01:19,836
整体样式支持


34
00:01:20,636 --> 00:01:23,296
二 一些应用到邮件信息的


35
00:01:23,296 --> 00:01:24,696
具体情况


36
00:01:25,496 --> 00:01:27,146
三 调试深色模式下


37
00:01:27,146 --> 00:01:28,966
网页内容的工具


38
00:01:31,396 --> 00:01:32,266
我们开始吧


39
00:01:32,796 --> 00:01:35,986
我开了一个新博客


40
00:01:35,986 --> 00:01:37,526
记录我最近


41
00:01:37,526 --> 00:01:38,896
在加州的旅行


42
00:01:40,956 --> 00:01:42,376
在设计网站


43
00:01:42,376 --> 00:01:43,816
让它响应手机和电脑端用户时


44
00:01:43,816 --> 00:01:45,976
正好可以


45
00:01:45,976 --> 00:01:48,276
添加深色模式支持


46
00:01:48,826 --> 00:01:50,446
深色模式可以看作是  


47
00:01:50,446 --> 00:01:52,026
响应式网页设计的一个进步


48
00:01:52,026 --> 00:01:54,646
是适应设备环境的


49
00:01:54,646 --> 00:01:56,746
另一种方式


50
00:01:57,606 --> 00:01:59,416
要注意


51
00:01:59,416 --> 00:02:01,336
Safari 浏览器和 WebKit 不会


52
00:02:01,336 --> 00:02:02,506
自动加深网页内容


53
00:02:02,506 --> 00:02:04,716
作为一名网页开发者


54
00:02:04,716 --> 00:02:06,536
是由你决定  


55
00:02:06,536 --> 00:02:08,756
深色系统外观下


56
00:02:08,756 --> 00:02:09,795
网页内容的样子


57
00:02:10,326 --> 00:02:12,236
现在我们来看一下


58
00:02:12,236 --> 00:02:14,846
如何将这个浅色页面设计 


59
00:02:14,876 --> 00:02:16,546
转换为可用深色模式的网站


60
00:02:17,596 --> 00:02:18,866
表明内容支持深色模式的


61
00:02:18,866 --> 00:02:20,986
主要方式是


62
00:02:20,986 --> 00:02:22,996
采用新的配色方案属性


63
00:02:22,996 --> 00:02:24,716
现在它被指定


64
00:02:24,716 --> 00:02:28,226
包含在 CSS 标准中


65
00:02:28,226 --> 00:02:31,016
在根节点


66
00:02:31,016 --> 00:02:32,896
指定值 浅色和深色 


67
00:02:32,896 --> 00:02:34,416
让渲染引擎知道


68
00:02:34,416 --> 00:02:36,456
这两种模式都被文件支持


69
00:02:37,196 --> 00:02:39,046
这改变了默认文本


70
00:02:39,046 --> 00:02:40,216
和网页的背景色


71
00:02:40,216 --> 00:02:42,386
让它和系统外观一致


72
00:02:42,386 --> 00:02:47,116
标准表单控件 滚动条


73
00:02:47,116 --> 00:02:49,236
和其他命名系统色 


74
00:02:49,236 --> 00:02:50,376
也会自动改变


75
00:02:51,566 --> 00:02:53,246
我们现在来看一下  


76
00:02:53,246 --> 00:02:54,606
把这个属性添加到我的博客


77
00:02:54,606 --> 00:02:55,556
会有什么变化


78
00:02:57,346 --> 00:02:59,096
可以看到   


79
00:02:59,096 --> 00:03:01,126
白色背景色变成了黑色


80
00:03:01,126 --> 00:03:02,676
大部分文本


81
00:03:02,676 --> 00:03:03,816
完全消失在黑色背景中


82
00:03:03,816 --> 00:03:06,576
我想要的不是这种效果


83
00:03:07,396 --> 00:03:08,746
我们来看一下 


84
00:03:08,746 --> 00:03:11,036
这个页面的样式规则


85
00:03:11,036 --> 00:03:11,846
看看发生了什么


86
00:03:14,216 --> 00:03:15,526
这就是页面变化部分的 


87
00:03:15,526 --> 00:03:17,306
主要样式规则


88
00:03:18,906 --> 00:03:20,646
文本之所以会消失


89
00:03:20,646 --> 00:03:22,266
是因为在 body 上 


90
00:03:22,266 --> 00:03:23,456
黑色被设置为文本颜色


91
00:03:23,816 --> 00:03:25,686
一级标题


92
00:03:25,686 --> 00:03:27,406
被设置为深灰文本色 


93
00:03:27,746 --> 00:03:28,976
颜色不够浅


94
00:03:28,976 --> 00:03:30,826
不能和黑色背景区分开


95
00:03:31,616 --> 00:03:33,276
默认 body 的文本颜色 


96
00:03:33,276 --> 00:03:34,966
是深色和浅色模式


97
00:03:36,636 --> 00:03:37,956
因为这是我想要的效果


98
00:03:37,956 --> 00:03:39,786
我可以从样式表上


99
00:03:39,786 --> 00:03:42,416
直接删除颜色属性覆盖


100
00:03:42,986 --> 00:03:44,366
因为我现在用的是 


101
00:03:44,366 --> 00:03:46,086
配色方案属性


102
00:03:46,086 --> 00:03:47,556
默认文本和背景色


103
00:03:47,556 --> 00:03:49,426
会自动变成


104
00:03:49,426 --> 00:03:50,656
深色模式值


105
00:03:50,956 --> 00:03:53,526
我要是想保存 


106
00:03:53,526 --> 00:03:55,566
样式表上的其他颜色  


107
00:03:55,566 --> 00:03:57,336
我可以用 CSS 自定义属性


108
00:03:57,336 --> 00:03:58,976
也被叫做 CSS 变量


109
00:03:58,976 --> 00:04:01,206
集中定义它们


110
00:04:01,206 --> 00:04:02,886
以便在整个网站样式表中


111
00:04:02,886 --> 00:04:04,146
使用这些颜色


112
00:04:04,906 --> 00:04:06,846
使用 CSS 变量会让以后


113
00:04:06,846 --> 00:04:08,746
样式表适应深色模式 


114
00:04:08,746 --> 00:04:09,976
变得非常简单


115
00:04:10,786 --> 00:04:11,976
我们来看一下怎么做


116
00:04:14,226 --> 00:04:16,016
我们只需要把这些颜色值


117
00:04:16,086 --> 00:04:17,875
移动到一个中心位置


118
00:04:18,236 --> 00:04:19,606
比如之前添加到


119
00:04:19,606 --> 00:04:21,776
配色方案的根节点规则


120
00:04:23,666 --> 00:04:25,846
我们为这些颜色  


121
00:04:25,846 --> 00:04:27,826
定义一个变量名


122
00:04:27,826 --> 00:04:29,356
用双连字符前缀标记


123
00:04:30,906 --> 00:04:33,086
现在我们返回


124
00:04:33,086 --> 00:04:35,136
原本的样式规则


125
00:04:35,136 --> 00:04:36,816
将还在使用的静态色值


126
00:04:36,816 --> 00:04:40,366
改为我们定义了的变量


127
00:04:40,366 --> 00:04:44,046
通过 var 函数引用它们


128
00:04:44,046 --> 00:04:46,466
就像这样


129
00:04:47,076 --> 00:04:48,906
现在这个样式表 


130
00:04:48,906 --> 00:04:50,706
就支持深色方案了


131
00:04:53,316 --> 00:04:54,586
就像不同设备宽度的


132
00:04:54,586 --> 00:04:56,366
响应式设计断点


133
00:04:56,366 --> 00:04:58,336
我们可以用媒体查询


134
00:04:58,336 --> 00:05:00,436
条件化深色模式


135
00:05:00,836 --> 00:05:02,726
具体来说 


136
00:05:02,726 --> 00:05:04,996
如果用户目前喜欢深色方案


137
00:05:08,366 --> 00:05:10,106
我们可以用  


138
00:05:10,106 --> 00:05:11,636
适合深色模式的颜色值


139
00:05:11,636 --> 00:05:13,996
重写刚才为浅色模式


140
00:05:13,996 --> 00:05:15,436
定义的变量


141
00:05:16,076 --> 00:05:17,186
现在我们来看一下


142
00:05:17,186 --> 00:05:18,556
应用了这些的


143
00:05:18,556 --> 00:05:19,456
页面是什么样子的


144
00:05:20,566 --> 00:05:22,436
我们从这儿开始


145
00:05:22,436 --> 00:05:23,976
目前只添加了配色方案属性


146
00:05:25,166 --> 00:05:26,936
文本和标题颜色 


147
00:05:26,936 --> 00:05:29,196
适应了深色外观


148
00:05:29,196 --> 00:05:31,926
但是图片呢


149
00:05:32,346 --> 00:05:33,866
比如这里的


150
00:05:33,866 --> 00:05:34,836
Mojave 沙漠图片


151
00:05:36,096 --> 00:05:37,996
Mojave 沙漠图片


152
00:05:37,996 --> 00:05:39,456
包含在一个图片节点内


153
00:05:39,506 --> 00:05:41,746
这个节点从服务器上获得 JPEG 


154
00:05:42,396 --> 00:05:44,116
我们可以用另一个响应式设计技术 


155
00:05:44,146 --> 00:05:46,556
简单地改变这个代码


156
00:05:47,876 --> 00:05:49,086
具体来说 图片节点


157
00:05:49,086 --> 00:05:50,696
是一个很好的方法 


158
00:05:50,696 --> 00:05:52,336
可以基于不同的设备特性 


159
00:05:52,336 --> 00:05:54,456
用同样的媒体查询


160
00:05:54,456 --> 00:05:57,736
获得一张图片的多个版本 


161
00:05:58,256 --> 00:06:00,316
这里我指定了 


162
00:06:00,316 --> 00:06:01,976
Mojave 沙漠夜晚的图片


163
00:06:01,976 --> 00:06:04,206
用的是媒体查询


164
00:06:04,206 --> 00:06:05,496
之前深色模式颜色也用过


165
00:06:05,496 --> 00:06:07,256
这样就可以 


166
00:06:07,256 --> 00:06:09,256
为喜欢深色方案的用户


167
00:06:09,256 --> 00:06:12,096
有条件地加载一张夜晚的图片


168
00:06:13,196 --> 00:06:16,576
一开始是两种配色方案


169
00:06:16,576 --> 00:06:19,406
用同一张图片


170
00:06:19,406 --> 00:06:20,986
现在沙漠图片


171
00:06:20,986 --> 00:06:23,336
会适应深色外观


172
00:06:23,336 --> 00:06:27,196
网站可以是深色和浅色两种外观


173
00:06:29,036 --> 00:06:31,216
概括一下  


174
00:06:31,216 --> 00:06:32,886
你应该用 color-scheme 属性


175
00:06:32,886 --> 00:06:34,846
声明对浅色和深色模式的支持


176
00:06:35,266 --> 00:06:36,646
这会告知渲染引擎


177
00:06:36,646 --> 00:06:38,516
你想将内容设计成什么颜色


178
00:06:38,516 --> 00:06:40,866
它可以改变默认颜色和控件


179
00:06:40,866 --> 00:06:44,326
使颜色相配


180
00:06:47,166 --> 00:06:48,836
默认颜色对比度不够高时


181
00:06:49,066 --> 00:06:49,916
用 prefers-color-scheme


182
00:06:49,916 --> 00:06:51,556
进行媒体查询


183
00:06:51,556 --> 00:06:52,766
设置自定义值


184
00:06:54,026 --> 00:06:55,656
你可以在 <picture> 元素里


185
00:06:55,796 --> 00:06:57,216
对适用深色模式的源


186
00:06:57,216 --> 00:06:59,426
使用相同的媒体查询


187
00:06:59,426 --> 00:07:02,116
和其他响应式图片


188
00:07:02,116 --> 00:07:04,806
在采用配色方案时


189
00:07:05,086 --> 00:07:06,646
可以考虑使用 CSS 变量


190
00:07:06,816 --> 00:07:08,406
这样会使在内容中 


191
00:07:08,406 --> 00:07:10,976
保持两种外观模式变得更简单


192
00:07:12,116 --> 00:07:13,796
接下来我将介绍


193
00:07:13,796 --> 00:07:14,746
深色模式和邮件信息


194
00:07:16,026 --> 00:07:18,156
正如 macOS Mojave 里的邮件


195
00:07:18,306 --> 00:07:20,156
直接在 iOS 13 邮件里写的


196
00:07:20,156 --> 00:07:22,786
普通邮件信息


197
00:07:22,786 --> 00:07:24,936
既可以是浅色外观


198
00:07:24,936 --> 00:07:27,196
也可以是深色


199
00:07:27,196 --> 00:07:28,306
即便它们像这样 


200
00:07:28,306 --> 00:07:29,736
包括内嵌式图片附件


201
00:07:30,666 --> 00:07:32,356
之所以会这样 


202
00:07:32,356 --> 00:07:33,606
是因为邮件 


203
00:07:33,606 --> 00:07:35,936
将自动变暗


204
00:07:36,226 --> 00:07:38,056
应用到普通邮件信息


205
00:07:40,176 --> 00:07:42,246
但是 如果你是


206
00:07:42,246 --> 00:07:43,866
一名模板设计者


207
00:07:43,866 --> 00:07:45,546
要设计一个广告


208
00:07:45,546 --> 00:07:47,476
里面包含远程加载图片


209
00:07:48,056 --> 00:07:49,376
你需要采用我刚才介绍的


210
00:07:49,376 --> 00:07:52,606
关于网页内容的设计技术 


211
00:07:53,276 --> 00:07:54,506
如果没有采用配色方案属性


212
00:07:54,506 --> 00:07:56,076
邮件就会用浅色外观


213
00:07:56,076 --> 00:07:57,786
展示邮件信息


214
00:07:57,786 --> 00:07:59,366
而不会自动


215
00:07:59,366 --> 00:08:03,166
把自动变深应用到


216
00:08:03,166 --> 00:08:04,516
普通邮件信息


217
00:08:05,696 --> 00:08:07,706
这是相同的邮件信息


218
00:08:07,836 --> 00:08:10,266
采用的是深色模式设计


219
00:08:10,266 --> 00:08:11,736
包括配色方案声明


220
00:08:12,236 --> 00:08:13,946
现在它可以完美适应


221
00:08:13,946 --> 00:08:15,356
深色系统外观


222
00:08:16,766 --> 00:08:19,296
概括一下 普通邮件信息


223
00:08:19,296 --> 00:08:20,996
颜色会自动变深


224
00:08:20,996 --> 00:08:22,106
即便它包括


225
00:08:22,106 --> 00:08:24,556
内嵌式图片附件


226
00:08:24,556 --> 00:08:27,256
包含许多远程图片的邮件信息


227
00:08:27,256 --> 00:08:29,226
比如定制邮件营销广告


228
00:08:29,426 --> 00:08:31,846
会默认使用浅色模式


229
00:08:32,946 --> 00:08:34,405
你可以在营销电邮里 


230
00:08:34,405 --> 00:08:38,476
声明支持深色配色方案


231
00:08:38,476 --> 00:08:40,376
用媒体查询处理


232
00:08:40,416 --> 00:08:41,876
自定义颜色和图片自定义


233
00:08:43,936 --> 00:08:45,666
现在为大家介绍一下


234
00:08:45,666 --> 00:08:46,916
调试深色模式内容的工具


235
00:08:46,916 --> 00:08:48,676
着重介绍 Web Inspector


236
00:08:49,806 --> 00:08:51,386
当系统是深色模式时  


237
00:08:51,386 --> 00:08:53,306
我们在 macOS 中为 Web Inspector 


238
00:08:53,306 --> 00:08:54,806
添加了深色外观


239
00:08:55,316 --> 00:08:57,186
这是许多网页开发者的请求


240
00:08:57,186 --> 00:09:00,426
很开心 现在有了深色模式


241
00:09:01,896 --> 00:09:03,296
不仅是添加了深色外观


242
00:09:03,296 --> 00:09:04,796
还有许多工具


243
00:09:04,796 --> 00:09:06,496
帮你调试深色模式下的


244
00:09:06,496 --> 00:09:07,776
你自己的内容


245
00:09:08,456 --> 00:09:10,626
首先是元素选项卡上


246
00:09:10,626 --> 00:09:12,616
新的配色方案切换键


247
00:09:12,616 --> 00:09:14,276
它会改变页面外观


248
00:09:14,556 --> 00:09:16,136
而你不需要


249
00:09:16,136 --> 00:09:18,496
每次都切换整个系统外观


250
00:09:19,226 --> 00:09:21,096
所以如果你喜欢用深色模式


251
00:09:21,476 --> 00:09:23,166
你可以用这个键快速查看


252
00:09:23,166 --> 00:09:25,256
你的页面在浅色外观下


253
00:09:25,256 --> 00:09:26,726
是什么样子的


254
00:09:29,146 --> 00:09:31,426
和之前一样 样式侧边栏


255
00:09:31,426 --> 00:09:33,146
展示任何


256
00:09:33,146 --> 00:09:35,526
适合所选元素的样式规则


257
00:09:35,526 --> 00:09:36,716
和任何媒体查询


258
00:09:37,286 --> 00:09:39,476
在这个例子中 你可以看到


259
00:09:39,476 --> 00:09:41,176
WebKit.org 网站上颜色变量的


260
00:09:41,176 --> 00:09:43,696
偏好配色方案


261
00:09:43,696 --> 00:09:45,196
媒体查询定义 


262
00:09:45,576 --> 00:09:48,656
这就是深色模式和 Web Inspector


263
00:09:49,056 --> 00:09:50,346
你可以查看其他  


264
00:09:50,346 --> 00:09:52,116
关于 Safari 浏览器和 WebKit 的讲演


265
00:09:52,116 --> 00:09:53,836
获取更多关于 Safari 浏览器 13 上 


266
00:09:53,836 --> 00:09:57,026
Web Inspector 的信息


267
00:09:58,136 --> 00:09:59,656
总之 要记住网页


268
00:09:59,656 --> 00:10:01,376
和内容丰富的邮件信息


269
00:10:01,376 --> 00:10:02,896
需要选择变成深色模式


270
00:10:03,396 --> 00:10:05,346
Safari 浏览器和 WebKit 不会自动


271
00:10:05,346 --> 00:10:06,556
让内容变深


272
00:10:07,356 --> 00:10:09,276
对于普通的邮件信息


273
00:10:09,276 --> 00:10:10,196
就不需要担心了


274
00:10:10,606 --> 00:10:12,196
邮件会自动加深它们的颜色


275
00:10:12,196 --> 00:10:14,046
使其与系统外观相配


276
00:10:14,826 --> 00:10:16,066
现在你可以用 Web Inspector


277
00:10:16,066 --> 00:10:17,716
测试浅色模式下你的内容


278
00:10:17,716 --> 00:10:19,536
还可以用元素选项卡中的 


279
00:10:19,536 --> 00:10:21,016
新配色方案切换键


280
00:10:21,016 --> 00:10:21,876
测试深色模式


281
00:10:22,096 --> 00:10:24,126
期待看到大家


282
00:10:24,126 --> 00:10:25,496
如何使用这个支持


283
00:10:25,756 --> 00:10:27,476
期待看到在 Mac 和 iOS 上


284
00:10:27,476 --> 00:10:29,946
你们 App 和网站的深色模式是什么样子的

