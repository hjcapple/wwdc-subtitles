1
00:00:06,807 --> 00:00:10,878 line:0
（Safari的新功能）


2
00:00:13,780 --> 00:00:14,615 line:-1
大家好


3
00:00:15,282 --> 00:00:16,517 line:-1
我是Jessie Berlin


4
00:00:16,583 --> 00:00:19,052 line:-1
我要介绍Safari的新功能


5
00:00:20,320 --> 00:00:22,022 line:-1
今天的内容有三个主题


6
00:00:23,490 --> 00:00:26,760 line:-2
最令人激动的就是
iPad实现了桌面级浏览器


7
00:00:26,827 --> 00:00:28,061 line:-1
（iPad桌面级浏览器）


8
00:00:29,029 --> 00:00:32,499 line:-2
iOS 13中
我们做了许多重大改变


9
00:00:32,566 --> 00:00:35,469 line:-1
为了能在iPad上浏览桌面版网页


10
00:00:37,304 --> 00:00:40,274 line:-2
这里显示的是
Safari界面控制器


11
00:00:40,340 --> 00:00:43,377 line:-1
它也可以立刻实现桌面级页面


12
00:00:45,279 --> 00:00:49,683 line:-2
如果app自带浏览器
或使用WKWebView


13
00:00:50,017 --> 00:00:52,853 line:-1
你可以看看本周初的演讲


14
00:00:52,920 --> 00:00:55,155 line:-1
获取具体指南和最佳实践


15
00:00:56,590 --> 00:00:58,759 line:-1
没有看过的可以去看看


16
00:00:58,825 --> 00:01:00,460 line:-1
（Safari的新功能）


17
00:01:00,527 --> 00:01:03,297 line:-1
第二点 Safari扩展的改进


18
00:01:04,063 --> 00:01:05,465 line:-1
首先要回顾一下


19
00:01:05,532 --> 00:01:08,101 line:-1
Safari扩展的四大类


20
00:01:08,168 --> 00:01:10,037 line:-1
（Safari扩展的改进）


21
00:01:10,103 --> 00:01:10,938 line:-1
（遗留的Safari扩展）


22
00:01:11,004 --> 00:01:14,842 line:-1
首先 macOS的遗留扩展


23
00:01:15,576 --> 00:01:19,146 line:-2
它在2010年引入
macOS X Snow Leopard


24
00:01:19,213 --> 00:01:20,581 line:-1
去年停用了


25
00:01:22,082 --> 00:01:23,784 line:-1
然后 内容拦截


26
00:01:24,251 --> 00:01:26,620 line:-1
iOS和macOS都能用


27
00:01:26,920 --> 00:01:29,590 line:-1
旨在保证速度和用户隐私


28
00:01:29,656 --> 00:01:30,591 line:-1
（内容拦截）


29
00:01:30,891 --> 00:01:32,626 line:-1
第三 分享扩展


30
00:01:32,993 --> 00:01:35,262 line:-1
也是iOS和macOS都可用


31
00:01:36,163 --> 00:01:37,497 line:-1
一旦被用户调用


32
00:01:37,764 --> 00:01:39,700 line:-2
就能在网页上
运行JavaScript


33
00:01:39,766 --> 00:01:42,002 line:-1
然后将数据返回app扩展


34
00:01:42,069 --> 00:01:43,604 line:-1
（分享扩展）


35
00:01:43,670 --> 00:01:47,307 line:-2
最后 Safari app扩展
macOS可用


36
00:01:48,275 --> 00:01:50,944 line:-2
它自动在网页上运行
不需要用户操作


37
00:01:51,011 --> 00:01:54,114 line:-2
可以限制在一个网页
也可以各处运行


38
00:01:54,181 --> 00:01:56,483 line:-1
（Safari app扩展）


39
00:01:56,550 --> 00:01:58,785 line:-1
由于内容拦截 分享扩展


40
00:01:58,852 --> 00:02:02,389 line:-2
和Safari app扩展
提供了强大的扩展性选择


41
00:02:02,456 --> 00:02:05,559 line:-1
又不会造成性能 或隐私问题


42
00:02:05,626 --> 00:02:07,261 line:-1
像Safari遗留扩展那样


43
00:02:08,428 --> 00:02:12,165 line:-2
所以Safari 13
摒弃了遗留扩展


44
00:02:12,432 --> 00:02:14,034 line:-1
不会再加载了


45
00:02:16,203 --> 00:02:18,872 line:-1
今天 我们主要关注


46
00:02:18,939 --> 00:02:22,676 line:-2
macOS上的内容拦截
和Safari app扩展的提升


47
00:02:25,212 --> 00:02:28,415 line:-2
这些Safari扩展
与Xcode下Mac app捆绑


48
00:02:28,682 --> 00:02:30,684 line:-1
让你可以利用


49
00:02:30,751 --> 00:02:35,989 line:-2
强大本地API和框架及HTML、
JavaScript和CSS


50
00:02:38,458 --> 00:02:39,693 line:-1
安装app时


51
00:02:39,760 --> 00:02:42,329 line:-2
若Safari app扩展
来自Mac App Store


52
00:02:42,963 --> 00:02:45,632 line:-2
扩展会立即出现在
Safari的偏好设置里


53
00:02:45,699 --> 00:02:47,301 line:-1
用户可以随时启用


54
00:02:48,936 --> 00:02:52,539 line:-1
当然也可以直接在网页部署app


55
00:02:52,606 --> 00:02:54,708 line:-1
在通过认证服务后


56
00:02:55,542 --> 00:02:58,245 line:-1
认证过的app至少要启用一次


57
00:02:58,312 --> 00:03:00,314 line:-1
才能在Safari中显示扩展


58
00:03:02,749 --> 00:03:04,151 line:-1
我们都爱内容拦截


59
00:03:04,218 --> 00:03:06,086 line:-2
和你创建的
Safari app扩展


60
00:03:06,787 --> 00:03:10,157 line:-2
我们也感谢你们的反馈
如缺陷报告


61
00:03:10,224 --> 00:03:11,425 line:-1
改进建议


62
00:03:11,825 --> 00:03:14,461 line:-2
和评论
在Safari开发者论坛里


63
00:03:17,030 --> 00:03:18,632 line:-1
根据你们的反馈


64
00:03:18,699 --> 00:03:22,002 line:-2
我们添加了新的API
给Safari app扩展


65
00:03:22,069 --> 00:03:23,437 line:-2
（Safari app
扩展的新API）


66
00:03:24,171 --> 00:03:27,207 line:-2
本年初 我们设立了
窗口和标签的API


67
00:03:27,841 --> 00:03:29,142 line:-1
现在标签导航可以


68
00:03:29,209 --> 00:03:32,679 line:-1
直接从app扩展程序显示全页内容


69
00:03:32,746 --> 00:03:35,449 line:-1
以提供更多功能 比如仪表盘


70
00:03:35,516 --> 00:03:37,184 line:-1
（窗口和标签）


71
00:03:37,251 --> 00:03:39,086 line:-1
所有打开的窗口和标签


72
00:03:39,152 --> 00:03:41,288 line:-1
都带有书签之类的服务


73
00:03:43,090 --> 00:03:45,359 line:-1
还能引导内置标签和窗口


74
00:03:45,425 --> 00:03:47,828 line:-1
方便从脚本中操作信息


75
00:03:47,895 --> 00:03:50,197 line:-1
完成更新工具栏之类的工作


76
00:03:51,498 --> 00:03:52,599 line:-1
（屏幕截图）


77
00:03:52,666 --> 00:03:55,335 line:-1
我们添加了获取页面可视内容的方法


78
00:03:55,836 --> 00:03:57,337 line:-1
比如 你可以


79
00:03:57,404 --> 00:04:01,141 line:-1
显示用户标签的自定义外观


80
00:04:02,042 --> 00:04:02,876 line:-1
（弹出框）


81
00:04:02,943 --> 00:04:06,380 line:-2
现在你能更好控制
Safari UI


82
00:04:06,446 --> 00:04:09,650 line:-1
从编程上实现 显示或关闭弹窗


83
00:04:09,716 --> 00:04:12,252 line:-1
如果实际需要的话


84
00:04:14,621 --> 00:04:15,589 line:-1
我们收到反馈


85
00:04:15,656 --> 00:04:17,624 line:-1
关于页面何时定向


86
00:04:17,690 --> 00:04:20,293 line:-1
以便转到不同版本的页面


87
00:04:21,128 --> 00:04:22,396 line:-1
新的Safari 13


88
00:04:22,829 --> 00:04:25,199 line:-1
设有回调 因此app扩展可以


89
00:04:25,265 --> 00:04:27,367 line:-1
了解完整的重定向链接


90
00:04:27,434 --> 00:04:28,702 line:-1
（页面定向通知）


91
00:04:29,803 --> 00:04:31,705 line:-1
对于内容拦截器的开发者


92
00:04:32,039 --> 00:04:34,875 line:-1
最希望向用户展示他们


93
00:04:34,942 --> 00:04:36,743 line:-1
为保护用户做出的贡献


94
00:04:36,810 --> 00:04:41,415 line:-2
比如反追踪 防密码货币挖掘
或阻止其他无用的脚本


95
00:04:41,481 --> 00:04:42,816 line:-1
（内容拦截的改进）


96
00:04:43,417 --> 00:04:45,752 line:-2
我们兴奋地宣布
Safari 13


97
00:04:45,819 --> 00:04:47,721 line:-1
能将内容拦截器直接关联


98
00:04:47,788 --> 00:04:49,323 line:-1
Safari app扩展


99
00:04:50,257 --> 00:04:52,993 line:-1
内容被拦截时就会通知


100
00:04:53,060 --> 00:04:54,228 line:-1
（内容拦截通知）


101
00:04:54,294 --> 00:04:56,997 line:-2
用户可以启用
Safari app扩展


102
00:04:57,064 --> 00:04:59,700 line:-1
当他们想要知道拦截的内容


103
00:05:00,400 --> 00:05:03,237 line:-1
或关闭扩展 获得最高隐私安全


104
00:05:05,739 --> 00:05:08,208 line:-1
以上是对这些API的概述


105
00:05:08,642 --> 00:05:10,410 line:-1
你还可以观看我们的视频


106
00:05:10,477 --> 00:05:12,746 line:-1
了解具体的使用方法


107
00:05:13,847 --> 00:05:15,949 line:-1
WWDC app上可以看


108
00:05:18,252 --> 00:05:21,188 line:-2
你最后一次使用
Safari app扩展


109
00:05:21,255 --> 00:05:24,091 line:-2
可能是在2016
我们第一次发布的时候


110
00:05:24,992 --> 00:05:26,827 line:-1
通过今天的内容 你可以看到


111
00:05:27,094 --> 00:05:30,197 line:-1
我们增加了很多功能和API


112
00:05:30,864 --> 00:05:33,667 line:-2
如果你还在使用
Safari遗留扩展


113
00:05:34,034 --> 00:05:36,803 line:-2
看看我们的指南
在developer.apple.com


114
00:05:38,438 --> 00:05:39,306 line:-1
（Safari的新功能）


115
00:05:39,373 --> 00:05:41,975 line:-1
以上就是对Safari扩展的改进


116
00:05:42,976 --> 00:05:44,278 line:-1
（macOS追踪链接）


117
00:05:44,344 --> 00:05:47,548 line:-1
最后是macOS的追踪链接


118
00:05:49,249 --> 00:05:51,752 line:-1
就是类似这样的追踪链接


119
00:05:52,119 --> 00:05:53,253 line:-1
连接网页和app


120
00:05:53,320 --> 00:05:54,154 line:-1
（此类链接）


121
00:05:54,221 --> 00:05:55,055 line:-1
（Mac的iPad app）


122
00:05:55,122 --> 00:05:57,491 line:-2
如果你要将iPad app
用于Mac


123
00:05:57,558 --> 00:06:00,327 line:-1
你就要知道它的工作原理


124
00:06:01,028 --> 00:06:04,765 line:-2
app内置浏览器在macOS上
不通用 但在iOS上可以


125
00:06:06,166 --> 00:06:09,269 line:-2
你可以在iOS使用
Safari界面控制器


126
00:06:09,336 --> 00:06:11,872 line:-1
实现app内浏览网页的最佳体验


127
00:06:11,939 --> 00:06:12,940 line:-1
（SFSafari界面控制器）


128
00:06:13,006 --> 00:06:15,008 line:-2
在Safari界面控制器中
打开链接时


129
00:06:15,075 --> 00:06:15,976 line:-1
在Mac app中


130
00:06:16,276 --> 00:06:19,179 line:-2
它的效果完全符合
macOS用户的预期


131
00:06:19,646 --> 00:06:21,982 line:-1
它会直接在浏览器中打开链接


132
00:06:22,049 --> 00:06:24,718 line:-2
并立即调用
SafariViewController DidFinish


133
00:06:24,785 --> 00:06:25,719 line:-1
显示通知


134
00:06:27,921 --> 00:06:31,758 line:-2
如果你在iOS部署
自定义的app内置浏览器


135
00:06:31,825 --> 00:06:36,129 line:-2
则强烈建议你考虑
直接在Mac上打开链接


136
00:06:36,430 --> 00:06:38,298 line:-1
就是在用户的浏览器中打开


137
00:06:38,565 --> 00:06:40,734 line:-1
这是macOS用户期望的


138
00:06:40,801 --> 00:06:41,802 line:-1
（自定义的app内置浏览器）


139
00:06:42,069 --> 00:06:43,470 line:-1
（macOS通用链接）


140
00:06:43,537 --> 00:06:46,874 line:-2
令人激动的还有
今年macOS也有通用链接了


141
00:06:47,975 --> 00:06:49,343 line:-1
在iOS和macOS上


142
00:06:49,409 --> 00:06:53,614 line:-2
通用链接可以用
普通的HTTPS URL


143
00:06:53,680 --> 00:06:56,650 line:-1
在已安装的app中打开网页


144
00:06:58,051 --> 00:07:00,320 line:-1
这比自定义的URL机制好太多


145
00:07:00,387 --> 00:07:02,656 line:-1
因为它不能在未安装的app上使用


146
00:07:05,025 --> 00:07:08,896 line:-2
Mac的通用链接会先在
浏览器中打开 跟以前一样


147
00:07:09,763 --> 00:07:12,332 line:-2
然后在Safari和
已安装的app中打开


148
00:07:12,633 --> 00:07:15,402 line:-2
Safari会在网页顶部
显示一个横幅


149
00:07:16,203 --> 00:07:19,806 line:-1
用户可以选择在app中打开链接


150
00:07:20,574 --> 00:07:21,408 line:-1
如果这样做


151
00:07:21,708 --> 00:07:24,645 line:-1
以后的链接就会直接在app中打开


152
00:07:25,946 --> 00:07:26,980 line:-1
（macOS通用链接）


153
00:07:27,047 --> 00:07:30,517 line:-2
更多关于通用链接的资料
请查看我们的视频


154
00:07:30,584 --> 00:07:33,053 line:-1
在WWDC app上


155
00:07:35,689 --> 00:07:37,257 line:-1
以上就是macOS追踪链接


156
00:07:39,660 --> 00:07:41,428 line:-1
这么多优秀的改进


157
00:07:41,495 --> 00:07:45,465 line:-1
在今年融汇了app开发和网页技术


158
00:07:47,534 --> 00:07:49,403 line:-1
最后我再讲一点


159
00:07:50,003 --> 00:07:52,573 line:-2
我们致力于将
Safari app扩展


160
00:07:52,639 --> 00:07:54,441 line:-1
和内容拦截 在今年做更得好


161
00:07:55,175 --> 00:07:56,877 line:-1
如果你之前使用过它们


162
00:07:56,944 --> 00:08:00,314 line:-1
但是发现缺失某些API或功能


163
00:08:00,914 --> 00:08:02,382 line:-1
请再检查一下


164
00:08:02,449 --> 00:08:04,451 line:-1
转换Safari遗留扩展


165
00:08:05,886 --> 00:08:06,720 line:-1
（更多信息）


166
00:08:06,787 --> 00:08:08,889 line:-1
想要了解更多信息


167
00:08:09,523 --> 00:08:10,991 line:-1
请移步WWDC app


168
00:08:11,058 --> 00:08:14,795 line:-2
参阅有关今天主题的资源链接
和其他相关文献


169
00:08:15,929 --> 00:08:17,598 line:-1
如果你现在有任何疑问


170
00:08:17,965 --> 00:08:20,200 line:-1
我们会在技术实验室3


171
00:08:20,267 --> 00:08:21,468 line:-1
欢迎你的到来


172
00:08:23,003 --> 00:08:25,405 line:-1
十分感谢 愿你们享受本届WWDC

