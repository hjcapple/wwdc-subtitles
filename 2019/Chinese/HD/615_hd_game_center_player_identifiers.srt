1
00:00:00,506 --> 00:00:04,500
[音乐]


2
00:00:06,476 --> 00:00:08,226
>> 大家好 我叫 Ben Harry


3
00:00:08,226 --> 00:00:09,466
来自 Game Center 工程团队


4
00:00:09,546 --> 00:00:12,166
在这个展示中


5
00:00:12,166 --> 00:00:13,546
我将谈一谈 Game Center 的


6
00:00:13,546 --> 00:00:14,346
玩家身份标识符


7
00:00:16,166 --> 00:00:17,716
首先


8
00:00:17,716 --> 00:00:19,156
我将给你们简单介绍一下


9
00:00:19,156 --> 00:00:20,426
Game Center 为你的游戏玩家


10
00:00:20,426 --> 00:00:21,486
提供了什么


11
00:00:23,426 --> 00:00:24,856
Game Center 是一个社交游戏网络


12
00:00:24,856 --> 00:00:26,306
它可以让玩家


13
00:00:26,306 --> 00:00:27,496
在排行榜上看到自己的最高分


14
00:00:27,496 --> 00:00:28,946
看到他们在你的游戏中


15
00:00:28,946 --> 00:00:30,396
获得的成就


16
00:00:30,396 --> 00:00:32,625
挑战他们的朋友


17
00:00:32,625 --> 00:00:34,226
来完成一个成就


18
00:00:34,226 --> 00:00:36,876
或者打败一个排行榜分数


19
00:00:36,876 --> 00:00:38,156
和他们的朋友们


20
00:00:38,156 --> 00:00:40,416
玩实时或回合制游戏


21
00:00:43,056 --> 00:00:44,116
Game Center 游戏的核心


22
00:00:44,116 --> 00:00:45,466
就是玩家


23
00:00:47,096 --> 00:00:48,316
玩家是由


24
00:00:48,316 --> 00:00:49,606
饱含区分不同玩家


25
00:00:49,606 --> 00:00:51,296
独特信息的


26
00:00:51,296 --> 00:00:52,586
对象所表示


27
00:00:53,916 --> 00:00:55,326
代表 Game Center 玩家的


28
00:00:55,326 --> 00:00:57,466
对象就是 GKPlayer


29
00:00:59,526 --> 00:01:01,296
每个 GKPlayer


30
00:01:01,296 --> 00:01:02,976
通过 alias 属性都有一个


31
00:01:02,976 --> 00:01:03,476
独特的昵称


32
00:01:04,995 --> 00:01:06,346
玩家也可以选择一个


33
00:01:06,346 --> 00:01:07,876
在 Game Center UI 中


34
00:01:07,876 --> 00:01:09,326
可以用到的头像


35
00:01:09,796 --> 00:01:12,546
另外 每个 Game Center 用户


36
00:01:12,546 --> 00:01:13,986
都有一个独特的


37
00:01:13,986 --> 00:01:15,996
静态身份标识符


38
00:01:15,996 --> 00:01:17,986
这个标识符在玩家玩的所有游戏中都会保持一致


39
00:01:19,486 --> 00:01:20,896
你可以使用这个标识符来


40
00:01:20,896 --> 00:01:22,516
存储每个玩家的信息


41
00:01:26,516 --> 00:01:27,896
现在我要谈一谈


42
00:01:27,896 --> 00:01:29,316
一个玩家的静态标识符


43
00:01:29,386 --> 00:01:30,666
现在是如何在 Game Center 中运行的


44
00:01:32,016 --> 00:01:33,346
你可能对此已经有所了解


45
00:01:33,376 --> 00:01:35,246
不过我们还是来看一下


46
00:01:35,246 --> 00:01:36,696
这个例子


47
00:01:36,696 --> 00:01:37,596
来巩固一下你的记忆


48
00:01:39,166 --> 00:01:40,896
这里我们有两个团队


49
00:01:40,896 --> 00:01:41,846
团队 A 和团队 B


50
00:01:43,086 --> 00:01:44,836
在这个展示中


51
00:01:44,836 --> 00:01:46,746
我会使用团队来代表


52
00:01:46,746 --> 00:01:48,716
使用 App Store Connect


53
00:01:48,716 --> 00:01:50,276
在 App Store 中


54
00:01:50,276 --> 00:01:51,276
发布游戏的开发团队


55
00:01:52,586 --> 00:01:54,486
我在玩团队 A 的两个游戏


56
00:01:54,486 --> 00:01:56,376
同时 我也非常喜欢


57
00:01:56,376 --> 00:01:58,136
团队 B 的游戏


58
00:01:59,166 --> 00:02:01,296
正如我们看到的


59
00:02:01,296 --> 00:02:03,086
我的静态 Game Center 标识符是 P123


60
00:02:04,256 --> 00:02:05,466
每个游戏都会看到


61
00:02:05,466 --> 00:02:06,836
相同的值


62
00:02:06,836 --> 00:02:08,636
我的标识符 P123


63
00:02:08,636 --> 00:02:11,476
不论我玩的什么游戏


64
00:02:11,476 --> 00:02:13,496
静态标识符都是相同的


65
00:02:14,746 --> 00:02:16,546
下一步 我们想要


66
00:02:16,546 --> 00:02:18,246
增加隐私性


67
00:02:18,246 --> 00:02:20,386
于是我们新增


68
00:02:20,386 --> 00:02:22,116
仅用于团队或游戏的


69
00:02:22,116 --> 00:02:23,146
新的玩家标识符


70
00:02:25,306 --> 00:02:26,656
所以让我们先来


71
00:02:26,656 --> 00:02:29,256
第一个新标识 teamPlayerID


72
00:02:30,466 --> 00:02:32,306
请记住 团队指的是


73
00:02:32,306 --> 00:02:34,026
将游戏发布到 App Store 的


74
00:02:34,026 --> 00:02:35,186
开发团队


75
00:02:36,416 --> 00:02:38,816
我们再次以团队 A


76
00:02:38,816 --> 00:02:41,276
和团队 B 之前提到的游戏为例


77
00:02:42,836 --> 00:02:44,486
请注意我现在有


78
00:02:44,486 --> 00:02:45,616
两个不同的标识符


79
00:02:46,346 --> 00:02:47,546
当我玩团队 A 的游戏时


80
00:02:47,546 --> 00:02:49,566
我的 teamPlayerID


81
00:02:49,566 --> 00:02:50,976
数值是 T11


82
00:02:50,976 --> 00:02:53,446
当我玩团队 B 的游戏时


83
00:02:53,446 --> 00:02:55,486
我的 teamPlayerID


84
00:02:55,486 --> 00:02:57,216
数值是 T22


85
00:02:58,596 --> 00:03:00,196
这意味着我的 teamPlayerID


86
00:03:00,196 --> 00:03:02,236
数值只局限于发布我玩的


87
00:03:02,236 --> 00:03:04,226
游戏的团队


88
00:03:05,646 --> 00:03:07,536
这是一个对玩家隐私的改进


89
00:03:07,536 --> 00:03:10,236
因为团队 A 只会知道


90
00:03:10,236 --> 00:03:12,966
我的 teamPlayerID 是 T11


91
00:03:12,966 --> 00:03:14,686
团队 B 只会知道


92
00:03:14,686 --> 00:03:16,316
我的 teamPlayerID 是 T22


93
00:03:18,066 --> 00:03:19,926
这就是 teamPlayerID


94
00:03:20,946 --> 00:03:22,416
我现在想要给你们介绍


95
00:03:22,416 --> 00:03:24,066
我们其他的新的玩家标识符


96
00:03:24,066 --> 00:03:25,106
gamePlayerID


97
00:03:28,046 --> 00:03:29,636
gamePlayerID 是每个游戏中


98
00:03:29,636 --> 00:03:30,526
每个玩家都独有的标识符


99
00:03:31,786 --> 00:03:33,416
这意味着我的 gamePlayerID


100
00:03:33,416 --> 00:03:35,396
在我玩的每个游戏中


101
00:03:35,396 --> 00:03:35,816
都是独一无二的


102
00:03:37,326 --> 00:03:39,276
它的数值也


103
00:03:39,276 --> 00:03:40,926
不受发布游戏的团队约束


104
00:03:41,466 --> 00:03:44,446
让我们回到熟悉的两个团队


105
00:03:44,446 --> 00:03:46,556
团队 A 和团队 B


106
00:03:47,196 --> 00:03:49,406
正如你所见


107
00:03:49,406 --> 00:03:51,206
不管是哪个团队发布的游戏


108
00:03:51,206 --> 00:03:53,846
我的 gamePlayerID


109
00:03:53,846 --> 00:03:55,156
在每个游戏中都不一样


110
00:03:57,226 --> 00:03:58,496
为了进一步展示


111
00:03:58,496 --> 00:04:00,146
gamePlayerID 是如何不受团队约束的


112
00:04:00,146 --> 00:04:01,976
我们来考虑一个


113
00:04:01,976 --> 00:04:03,446
游戏从一个团队转移到


114
00:04:03,446 --> 00:04:04,666
另一个团队的例子


115
00:04:05,196 --> 00:04:07,786
我将为你们展示


116
00:04:07,786 --> 00:04:09,556
当游戏 2 从


117
00:04:09,966 --> 00:04:11,396
团队 A 转移到团队 B 时 


118
00:04:11,396 --> 00:04:12,706
我的范围标识符会发生什么


119
00:04:15,066 --> 00:04:16,716
比如说团队 A 将游戏 2 的所有权


120
00:04:16,716 --> 00:04:18,866
交给了团队 B


121
00:04:20,026 --> 00:04:22,326
现在 我想玩游戏 2


122
00:04:24,016 --> 00:04:24,716
我游戏 2 的 gamePlayerID 还是一样的


123
00:04:26,346 --> 00:04:28,136
我游戏 2 的 gamePlayerID


124
00:04:28,136 --> 00:04:29,876
与游戏相连


125
00:04:29,876 --> 00:04:31,196
不受团队的约束


126
00:04:33,416 --> 00:04:35,266
现在 你可能会注意到


127
00:04:35,266 --> 00:04:36,546
关于我的游戏 2 的 


128
00:04:36,546 --> 00:04:37,606
teamPlayerID 中的一些变化


129
00:04:39,046 --> 00:04:40,786
我的游戏 2 的 teamPlayerID


130
00:04:40,786 --> 00:04:42,526
呈现了团队 B 的数值


131
00:04:43,006 --> 00:04:44,226
因为它现在由 B 团队


132
00:04:44,226 --> 00:04:45,416
发布至 App Store


133
00:04:47,846 --> 00:04:49,176
我们已经讲述了


134
00:04:49,176 --> 00:04:50,086
新的 Game Center 标识符的范围


135
00:04:50,086 --> 00:04:51,456
以及当游戏


136
00:04:51,456 --> 00:04:52,886
所有权转变时


137
00:04:52,886 --> 00:04:54,596
这些标识符会发生什么


138
00:04:56,326 --> 00:04:57,866
现在 我将谈一谈


139
00:04:57,866 --> 00:04:59,016
你如何在


140
00:04:59,016 --> 00:05:00,456
你开发的游戏中


141
00:05:00,456 --> 00:05:01,096
使用这些标识符


142
00:05:04,216 --> 00:05:05,636
正如你所见


143
00:05:05,636 --> 00:05:07,296
我们为 GKPlayer 增加了两个


144
00:05:07,296 --> 00:05:09,596
新的范围标识符 那就是 teamPlayerID 和


145
00:05:09,596 --> 00:05:10,766
gamePlayerID


146
00:05:11,256 --> 00:05:14,446
teamPlayerID 


147
00:05:14,446 --> 00:05:16,066
和 gamePlayerID


148
00:05:16,066 --> 00:05:17,156
引入的目的就是


149
00:05:17,156 --> 00:05:19,586
增强玩家的隐私


150
00:05:19,586 --> 00:05:20,666
这与 Apple 承诺


151
00:05:20,666 --> 00:05:22,786
保护用户隐私是吻合的


152
00:05:24,946 --> 00:05:26,436
新的标识符会替换


153
00:05:26,436 --> 00:05:28,186
现有的静态标识符


154
00:05:28,646 --> 00:05:30,356
也就是 GKPlayer 的 playerID


155
00:05:32,986 --> 00:05:34,506
playerID 属性


156
00:05:34,506 --> 00:05:35,276
现在被弃用了


157
00:05:35,806 --> 00:05:36,926
所以我鼓励你们


158
00:05:36,926 --> 00:05:38,886
使用这些新的范围标识符


159
00:05:41,956 --> 00:05:43,736
正如我之前提到的


160
00:05:43,736 --> 00:05:45,256
teamPlayerID 和 gamePlayerID


161
00:05:45,256 --> 00:05:46,866
是引入来代替


162
00:05:46,866 --> 00:05:48,036
静态 playerID 的


163
00:05:49,206 --> 00:05:50,786
如果你不在你的游戏中


164
00:05:50,786 --> 00:05:52,286
查询 playerID


165
00:05:52,286 --> 00:05:53,716
那你不需要做出任何改变


166
00:05:55,286 --> 00:05:56,716
如果你查询 playerID


167
00:05:56,716 --> 00:05:58,386
你可能需要转换到


168
00:05:58,386 --> 00:05:59,566
新的范围标识符


169
00:06:01,026 --> 00:06:02,416
在大多数情况下你会使用


170
00:06:02,416 --> 00:06:03,616
teamPlayerID


171
00:06:05,256 --> 00:06:06,846
同样地


172
00:06:06,846 --> 00:06:08,236
如果你现在使用静态 playerID


173
00:06:08,236 --> 00:06:10,146
存储游戏数据


174
00:06:10,146 --> 00:06:11,286
你应该使用团队范围的 ID


175
00:06:12,406 --> 00:06:13,576
这样做可以处理


176
00:06:13,576 --> 00:06:15,086
多名 Game Center 玩家


177
00:06:15,086 --> 00:06:17,116
共享设备的情况


178
00:06:18,896 --> 00:06:20,026
如果你们有人


179
00:06:20,026 --> 00:06:21,496
坚持在自己的后端系统中


180
00:06:21,496 --> 00:06:24,116
使用静态 playerID


181
00:06:24,116 --> 00:06:25,526
你也应该更新至新的


182
00:06:25,526 --> 00:06:26,736
范围标识符


183
00:06:28,166 --> 00:06:29,686
在成功认证后


184
00:06:29,686 --> 00:06:31,046
你可以随时这样做


185
00:06:32,966 --> 00:06:35,086
接下来 让我来为你们展示一下


186
00:06:35,086 --> 00:06:36,716
范围标识符寻找本地玩家


187
00:06:36,716 --> 00:06:39,126
和寻找非本地玩家的不同


188
00:06:40,716 --> 00:06:42,066
你可能知道


189
00:06:42,066 --> 00:06:44,136
GKLocalPlayer 是代表了


190
00:06:44,136 --> 00:06:45,456
在一个设备上验证过的 Game Center


191
00:06:45,456 --> 00:06:47,246
玩家的对象


192
00:06:47,956 --> 00:06:50,056
在任何特定的时间


193
00:06:50,056 --> 00:06:51,616
只有一个玩家能被认证


194
00:06:52,346 --> 00:06:54,536
GKLocalPlayer 有一个


195
00:06:54,536 --> 00:06:56,926
持久化的 teamPlayerID 和 GamePlayerID


196
00:06:57,566 --> 00:06:59,766
那 GKPlayer 又是怎样的呢
 
00:07:00,436 --> 00:07:02,206
GKPlayer 对象


197
00:07:02,206 --> 00:07:03,956
提供关于其他玩家的信息


198
00:07:05,196 --> 00:07:06,686
这些是非本地玩家


199
00:07:06,686 --> 00:07:08,186
他们可能会在排行榜中


200
00:07:08,186 --> 00:07:09,706
在最近玩过的名单


201
00:07:09,706 --> 00:07:11,386
多人模式以及其他情况中出现


202
00:07:13,086 --> 00:07:14,306
GKPlayer 的范围标识符


203
00:07:14,306 --> 00:07:16,266
会根据使用的


204
00:07:16,266 --> 00:07:18,346
环境进行实例化


205
00:07:19,396 --> 00:07:21,426
比如说根据


206
00:07:21,426 --> 00:07:22,796
每个排行榜实例


207
00:07:22,796 --> 00:07:24,396
多人模式


208
00:07:24,396 --> 00:07:26,656
这意味着


209
00:07:26,656 --> 00:07:28,286
你不能依靠它们来


210
00:07:28,286 --> 00:07:29,506
在后续的游戏中持久化


211
00:07:32,566 --> 00:07:33,756
如果你们有自己的


212
00:07:33,756 --> 00:07:35,066
玩家账号系统


213
00:07:35,216 --> 00:07:36,496
在这种情况下


214
00:07:36,496 --> 00:07:37,866
你们会加载相应的


215
00:07:37,866 --> 00:07:38,456
GKPlayer 对象


216
00:07:39,266 --> 00:07:40,716
为了实现这个


217
00:07:40,716 --> 00:07:42,326
使用在 GKPlayer 上的 


218
00:07:42,406 --> 00:07:43,676
loadPlayersForIdentifiers:


219
00:07:43,676 --> 00:07:44,906
withCompletionHandler 方法


220
00:07:46,456 --> 00:07:47,846
你可以使用


221
00:07:47,846 --> 00:07:49,646
teamPlayerID 或者


222
00:07:49,646 --> 00:07:51,006
gamePlayerID 作为标识符


223
00:07:53,436 --> 00:07:54,496
当你使用新的标识时


224
00:07:54,496 --> 00:07:56,246
在很罕见的情况下


225
00:07:56,516 --> 00:07:58,036
范围标识符


226
00:07:58,036 --> 00:07:59,606
可能会不可用


227
00:08:00,906 --> 00:08:02,196
如果范围标识符不可用的话


228
00:08:02,196 --> 00:08:03,956
应该怎么做呢


229
00:08:05,396 --> 00:08:06,986
一般来说


230
00:08:06,986 --> 00:08:08,516
当一个玩家启动你的游戏


231
00:08:08,516 --> 00:08:10,246
本地玩家的


232
00:08:10,246 --> 00:08:11,346
范围标识符


233
00:08:11,346 --> 00:08:12,636
会在成功认证后启用


234
00:08:14,146 --> 00:08:16,296
然而 也有很小的概率


235
00:08:16,296 --> 00:08:18,876
范围标识符可能会不可用


236
00:08:19,826 --> 00:08:21,696
针对这种情况


237
00:08:21,696 --> 00:08:23,046
我们为 GKPlayer 增加了新的 API


238
00:08:23,486 --> 00:08:25,256
scopedIDsArePersistent


239
00:08:26,686 --> 00:08:28,266
如果它们不可用的话


240
00:08:28,266 --> 00:08:29,206
这个属性就为假


241
00:08:31,136 --> 00:08:32,416
这意味着你需要


242
00:08:32,416 --> 00:08:34,066
在为本地玩家使用 teamPlayerID 或者


243
00:08:34,066 --> 00:08:35,506
gamePlayerID 之前


244
00:08:35,506 --> 00:08:36,976
就检查这个属性


245
00:08:39,176 --> 00:08:40,206
我们来通过一个


246
00:08:40,206 --> 00:08:41,416
在成功认证后


247
00:08:41,416 --> 00:08:43,025
使用范围标识符的


248
00:08:43,025 --> 00:08:45,846
例子来整合所有信息


249
00:08:48,316 --> 00:08:49,396
正如你们所知


250
00:08:49,396 --> 00:08:50,886
当认证处理器返回时


251
00:08:51,036 --> 00:08:52,486
你需要检查 Game Center


252
00:08:52,486 --> 00:08:53,536
是否返回了一个


253
00:08:53,536 --> 00:08:54,086
视图控制器


254
00:08:55,056 --> 00:08:56,666
如果是的话 你需要在


255
00:08:56,666 --> 00:08:57,826
合适的时候展示视图控制器


256
00:09:00,916 --> 00:09:02,276
如果没有视图控制器


257
00:09:02,276 --> 00:09:03,206
而且本地玩家也成功认证了


258
00:09:03,206 --> 00:09:04,696
那你就可以


259
00:09:05,336 --> 00:09:06,376
在第一次检测到


260
00:09:06,376 --> 00:09:07,996
范围 ID 是一个持久化数值时


261
00:09:07,996 --> 00:09:10,576
就使用范围标识符


262
00:09:13,916 --> 00:09:15,286
如果你在自己的后端系统中


263
00:09:15,286 --> 00:09:17,166
持久化 PlayerID


264
00:09:17,816 --> 00:09:19,116
现在你应该把


265
00:09:19,116 --> 00:09:20,596
旧的静态标识符


266
00:09:20,596 --> 00:09:22,296
转换为新的范围标识符


267
00:09:22,506 --> 00:09:25,846
接下来我要总结一下


268
00:09:25,846 --> 00:09:27,496
我今天介绍的内容


269
00:09:28,656 --> 00:09:30,036
Game Center 为了


270
00:09:30,036 --> 00:09:31,696
增加玩家的隐私性


271
00:09:31,696 --> 00:09:33,106
引入了新的范围标识符


272
00:09:33,666 --> 00:09:36,166
一个玩家的 teamPlayerID


273
00:09:36,166 --> 00:09:37,586
仅限于你的开发团队


274
00:09:38,556 --> 00:09:41,716
一个玩家的 gamePlayerID 限于游戏


275
00:09:41,716 --> 00:09:43,256
如果这个游戏的开发者变了


276
00:09:43,256 --> 00:09:45,066
gamePlayerID 依然属于游戏


277
00:09:46,836 --> 00:09:48,436
使用这些 Game Center API 中


278
00:09:48,436 --> 00:09:50,096
新的范围标识符


279
00:09:50,096 --> 00:09:51,186
正如你使用 playerID 一样


280
00:09:51,476 --> 00:09:54,136
这些标识符现在都是可用的


281
00:09:54,136 --> 00:09:56,056
所以今天就开始使用吧


282
00:09:59,566 --> 00:10:00,786
了解关于这个演示的


283
00:10:00,786 --> 00:10:02,686
更多信息 请关注


284
00:10:02,686 --> 00:10:03,596
屏幕上的链接


285
00:10:06,436 --> 00:10:07,746
谢谢收看

